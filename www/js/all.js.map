{"version":3,"sources":["app.js","controllers/controllers.js","controllers/eventsController.js","controllers/usersController.js","services/eventsService.js","services/profileService.js","services/services.js","services/usersService.js","services/utils.js"],"names":[],"mappings":"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","file":"all.js","sourcesContent":["// Ionic Starter App\n\n// angular.module is a global place for creating, registering and retrieving Angular modules\n// 'starter' is the name of this angular module example (also set in a <body> attribute in index.html)\n// the 2nd parameter is an array of 'requires'\n// 'starter.controllers' is found in controllers.js\nangular.module('swirl', ['ionic', 'swirl.services', 'swirl.controllers', 'users.controller'])\n\n.run(function($ionicPlatform) {\n    $ionicPlatform.ready(function() {\n\n        // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard\n        // for form inputs)\n        if (window.cordova && window.cordova.plugins.Keyboard) {\n            window.cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\n            window.cordova.plugins.Keyboard.disableScroll(true);\n\n        }\n        if (window.StatusBar) {\n            // org.apache.cordova.statusbar required\n            window.StatusBar.styleDefault();\n        }\n    });\n})\n\n.config(function($stateProvider, $urlRouterProvider) {\n    $stateProvider\n\n  .state('app', {\n      url: '/app',\n      abstract: true,\n      templateUrl: 'templates/menu.html',\n      controller: 'AppCtrl',\n      resolve: {\n          user: function(ProfileService) {\n              return ProfileService.get();\n          }\n      }\n  })\n\n  .state('intro', {\n      url: '/intro',\n      templateUrl: 'templates/intro.html',\n      controller: 'IntroCtrl'\n  })\n\n  .state('app.events', {\n      url: '/events',\n      views: {\n          'menuContent': {\n              templateUrl: 'templates/events.html',\n              controller: 'EventsCtrl'\n          }\n      }\n  })\n\n  .state('app.event', {\n      url: '/events/:eventId',\n      views: {\n          'menuContent': {\n              templateUrl: 'templates/event.html',\n              controller: 'EventCtrl'\n          }\n      }\n  })\n\n  .state('app.profile', {\n      url: '/profile',\n      views: {\n        'menuContent': {\n            templateUrl: 'templates/profile.html',\n            controller: 'ProfileCtrl',\n            resolve: {\n                user: function(ProfileService) {\n                    return ProfileService.get();\n                }\n            }\n        }\n    }\n  })\n\n  .state('app.users', {\n      url: '/users',\n      views: {\n          'menuContent': {\n              templateUrl: 'templates/users.html',\n              controller: 'UsersCtrl'\n          }\n      }\n  })\n\n  .state('app.login', {\n      url: '/login',\n      views: {\n        'menuContent': {\n            templateUrl: 'templates/login.html',\n            controller: 'LoginCtrl'\n        }\n    }\n  })\n\n  .state('app.list', {\n      url: '/list',\n      views: {\n        'menuContent': {\n            templateUrl: 'templates/list.html',\n            controller: 'ListCtrl'\n        }\n    }\n  });\n    // if none of the above states are matched, use this as the fallback\n    $urlRouterProvider.otherwise('/intro');\n});\n","angular.module('swirl.controllers', ['swirl.services', 'ionic.utils', 'ionic-material', 'events.service'])\n\n.controller('AppCtrl', function($scope, user) {\n    // With the new view caching in Ionic, Controllers are only called\n    // when they are recreated or on app start, instead of every page change.\n    // To listen for when this page is active (for example, to refresh data),\n    // listen for the $ionicView.enter event:\n    $scope.$on('$ionicView.enter', function() {\n        $scope.user = user;\n    });\n})\n\n.controller('TestCtrl', function($scope) {\n    $scope.probame = 'hola';\n})\n\n.controller('EventsCtrl', function($scope, $ionicHistory, EventsService, ionicMaterialInk) {\n    console.log($ionicHistory.currentView());\n    $scope.events = [];\n\n    $scope.today = function() {\n        $scope.events = EventsService.get();\n        console.log('today');\n    };\n\n    $scope.week = function() {\n        $scope.events = EventsService.get();\n    };\n\n    ionicMaterialInk.displayEffect();\n})\n\n.controller('EventCtrl', function($scope, $ionicHistory, $stateParams, EventsService, ionicMaterialInk, $ionicLoading, Maps) {\n    console.log($ionicHistory.currentView());\n\n    EventsService.get($stateParams.eventId).then(function(value) {\n        $scope.event = value;\n    });\n\n    //google.maps.event.addDomListener(window, 'load', function() {\n    $scope.map = Maps.initialize($scope);\n    //});\n\n    $scope.centerOnMe = function() {\n        if (!$scope.map) {\n            return;\n        }\n\n        $scope.loading = $ionicLoading.show({\n            content: 'Getting current location...',\n            showBackdrop: false\n        });\n\n        navigator.geolocation.getCurrentPosition(function(pos) {\n            $scope.map.setCenter(new window.google.maps.LatLng(pos.coords.latitude, pos.coords.longitude));\n            $scope.loading.hide();\n        }, function(error) {\n            alert('Unable to get location: ' + error.message);\n        });\n    };\n\n    $scope.clickTest = function() {\n        alert('Example of infowindow with ng-click');\n    };\n\n    ionicMaterialInk.displayEffect();\n})\n\n.controller('ProfileCtrl', function($scope, $ionicHistory, $state, ionicMaterialInk, ProfileService, user) {\n    console.log($ionicHistory.currentView());\n\n    if (!user) {\n        $state.go('intro');\n        return;\n    }\n    $scope.user = user;\n    $scope.data = {\n        fiestez: $scope.user.fiestez || 80\n    };\n\n    $scope.update = function() {\n        ProfileService.attr('fiestez', $scope.data.fiestez);\n    };\n\n    $scope.logout = function() {\n        ProfileService.logout();\n        $state.go('intro');\n    };\n\n    $scope.$on('$ionicView.beforeLeave', function() {\n        ProfileService.saveToDB();\n    });\n\n    ionicMaterialInk.displayEffect();\n})\n\n.controller('ListCtrl', function($scope, ItemsService, ionicMaterialInk) {\n    $scope.items = ItemsService;\n    $scope.addItem = function() {\n        var name = prompt('What do you need to buy?');\n        if (name) {\n            $scope.items.$add({\n                'name': name\n            });\n        }\n    };\n    ionicMaterialInk.displayEffect();\n})\n\n.controller('IntroCtrl', function($scope, $ionicSlideBoxDelegate, $ionicHistory, $state, AuthService, ProfileService, ionicMaterialInk) {\n    if (ProfileService.get()) {\n        $ionicHistory.nextViewOptions({\n            historyRoot: true\n        });\n        $state.go('app.profile');\n    }\n\n    $scope.nextSlide = function() {\n        $ionicSlideBoxDelegate.next();\n    };\n\n    $scope.login = function() {\n\n        function login() {\n            AuthService.$authWithOAuthPopup('facebook').then(function() {\n                console.log('logged in');\n            }).catch(function(error) {\n                if (error.code === 'TRANSPORT_UNAVAILABLE') {\n                    AuthService.$authWithOAuthRedirect('facebook').then(function() {\n                        // Users successfully logged in. We can log to the console\n                        // since weâ€™re using a popup here\n                        console.log('logged in');\n                    });\n                } else {\n                    // Another error occurred\n                    console.log(error);\n                }\n            });\n        }\n\n        AuthService.$onAuth(function(authData) {\n            if (authData === null) {\n                console.log('Not logged in yet');\n                login();\n            } else {\n                ProfileService.save(authData);\n                $state.go('app.profile');\n            }\n        });\n    };\n\n    $scope.$on('$ionicView.enter', function() {\n        $ionicSlideBoxDelegate.slide(0);\n    });\n\n    ionicMaterialInk.displayEffect();\n});\n\n","\"use strict\";","angular.module('users.controller', ['firebase', 'users.service'])\n\n.controller('UsersCtrl', function($scope, UsersService, ionicMaterialInk, $ionicTabsDelegate) {\n    $scope.users = [];\n\n    $scope.following = function() {\n        /*$ionicTabsDelegate.select(0);\n        $scope.users = [];*/\n        UsersService.following();\n    };\n\n    $scope.followers = function() {\n        /*$ionicTabsDelegate.select(1);\n        $scope.users = [];*/\n        UsersService.followers();\n    };\n\n    $scope.$on('userAdded', function(event, user) {\n        $scope.users.push(user);\n    });\n\n    ionicMaterialInk.displayEffect();\n});","angular.module('events.service', ['firebase'])\n\n.factory('EventsService', function($firebaseArray, $firebaseObject) {\n    var ref = new Firebase('https://shining-torch-3644.firebaseio.com/events');\n    function get(id) {\n        if (id) {\n            // Should I be using loaded here?\n            return $firebaseObject(ref.child(id)).$loaded();\n        } else {\n            return $firebaseArray(ref);\n        }\n    }\n\n    return {\n        get: get\n    };\n});","angular.module('profile.service', [])\n\n.factory('ProfileService', function($localStorage) {\n    var ref = new Firebase('https://shining-torch-3644.firebaseio.com/users'),\n        user;\n\n    function get() {\n        return user || $localStorage.getObject('user');\n    }\n\n    function attr(prop, value) {\n        if (value) {\n            user[prop] = value;\n            $localStorage.setObject('user', user);\n            return this;\n        } else {\n            return user[prop];\n        }\n        return $localStorage.getObject('user').prop;\n    }\n\n    function saveToDB() {\n        var uid = $localStorage.get('uid');\n        ref.child(uid).set(user, function(error) {\n            if (error) {\n                console.log('Data could not be saved.' + error);\n            } else {\n                console.log('Data saved');\n            }\n        });\n    }\n\n    function save(userData) {\n        var userObj;\n        if (userData) {\n            if (userData.provider === 'facebook') {\n                userObj = formatFacebook(userData);\n            }\n        }\n\n        userObj.userData.fiestez = 50;\n\n        $localStorage.setObject('user', userObj.userData);\n        $localStorage.set('uid', userData.uid);\n\n        ref.child(userData.uid).set(userObj.userData, function(error) {\n            if (error) {\n                console.log('Data could not be saved.' + error);\n            } else {\n                console.log('Data saved');\n            }\n        });\n    }\n\n    function logout() {\n        $localStorage.setObject('user', null);\n        $localStorage.set('uid', null);\n    }\n\n    function formatFacebook(userRawData) {\n        var gender,\n        userData;\n\n        userData = {\n            firstName: userRawData.facebook.cachedUserProfile.first_name,\n            lastName: userRawData.facebook.cachedUserProfile.last_name,\n            facebookURL: userRawData.facebook.cachedUserProfile.link,\n            profileImage: userRawData.facebook.profileImageURL,\n            facebook: {\n                accessToken: userRawData.facebook.accessToken,\n                id: userRawData.facebook.id,\n                token: userRawData.token\n            }\n        };\n\n        gender = userRawData.facebook.cachedUserProfile.gender;\n        if (gender) {\n            userData.gender = (userRawData.facebook.cachedUserProfile.gender === 'male') ? 'Hombre' : 'Mujer';\n        }\n\n        return {\n            userData: userData\n        };\n    }\n\n    user = get();\n\n    return {\n        get: get,\n        attr: attr,\n        logout: logout,\n        save: save,\n        saveToDB: saveToDB\n    };\n});\n","angular.module('swirl.services', ['ngResource', 'ionic.utils', 'profile.service', 'firebase'])\n\n.factory('ItemsService', function($firebaseArray) {\n    var itemsRef = new Firebase('https://shining-torch-3644.firebaseio.com/items');\n    return $firebaseArray(itemsRef);\n})\n\n.factory('AuthService', function($firebaseAuth) {\n    var usersRef = new Firebase('https://shining-torch-3644.firebaseio.com/users');\n    return $firebaseAuth(usersRef);\n})\n\n.factory('DB', function() {\n    return new Firebase('https://shining-torch-3644.firebaseio.com/');\n})\n\n.factory('Maps', function($compile) {\n    function initialize($scope) {\n        var myLatlng = new window.google.maps.LatLng(43.07493, -89.381388);\n\n        var mapOptions = {\n            center: myLatlng,\n            zoom: 16,\n            mapTypeId: window.google.maps.MapTypeId.ROADMAP\n        };\n        var map = new window.google.maps.Map(document.getElementById('map'),\n        mapOptions);\n\n        //Marker + infowindow + angularjs compiled ng-click\n        var contentString = \"<div><a ng-click='clickTest()'>Click me!</a></div>\";\n        var compiled = $compile(contentString)($scope);\n\n        var infowindow = new window.google.maps.InfoWindow({\n            content: compiled[0]\n        });\n\n        var marker = new window.google.maps.Marker({\n            position: myLatlng,\n            map: map,\n            title: 'Uluru (Ayers Rock)'\n        });\n\n        window.google.maps.event.addListener(marker, 'click', function() {\n            infowindow.open(map, marker);\n        });\n\n        return map;\n    }\n\n    return {\n        initialize: initialize\n    };\n});\n","angular.module('users.service', ['ionic.utils', 'firebase', 'profile.service'])\n\n.factory('UsersService', function($firebaseArray, $localStorage) {\n    var uid = $localStorage.get('uid'),\n        ref = new Firebase('https://shining-torch-3644.firebaseio.com/');\n\n    // Just for testing purposes\n    function getAll() {\n        return $firebaseArray(ref.child('users'));\n    }\n\n    function followers() {\n        // fetch a list of Mary's groups\n        ref.child('users/' + uid + '/followers').on('child_added', function(snapshot) {\n            // for each group, fetch the name and print it\n            var userKey = snapshot.key();\n            ref.child('users/' + userKey).once('value', function(snapshot) {\n                console.log(snapshot.val() + ' follows me');\n            });\n        });\n    }\n\n    function following() {\n        ref.child('users/' + uid + '/following').on('child_added', function(snapshot) {\n            // for each group, fetch the name and print it\n            var userKey = snapshot.key();\n            ref.child('users/' + userKey).once('value', function(snapshot) {\n                console.log('I\\'m following: ' + snapshot.val());\n            });\n        });\n        /*return $firebaseArray(ref.child(uid).child('followers'));*/\n    }\n\n    return {\n        getAll: getAll,\n        followers: followers,\n        following: following\n    };\n});","angular.module('ionic.utils', [])\n\n.factory('$localStorage', ['$window', function($window) {\n    return {\n        set: function(key, value) {\n            $window.localStorage[key] = value;\n        },\n        get: function(key, defaultValue) {\n            return $window.localStorage[key] || defaultValue;\n        },\n        setObject: function(key, value) {\n            $window.localStorage[key] = JSON.stringify(value);\n        },\n        getObject: function(key) {\n            try {\n                return JSON.parse($window.localStorage[key]);\n            } catch (e) {\n                return null;\n            }\n        }\n    };\n}]);"],"sourceRoot":"/source/"}